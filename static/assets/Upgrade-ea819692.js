import{b as y,u as h,a as u,h as j,d as c,q as o,k as _,j as s,r as t,M as v}from"./index-5ef1bae8.js";import{g as f,a as C}from"./getArmy-3bee7851.js";import{u as l}from"./useMutation-da1fc6eb.js";const k="_upgradeBlock_85a2v_1",M={upgradeBlock:k};function S({army:a}){const{tg_id:r}=y(),i=h(),n=u(f),p=l({mutationFn:e=>j(e.tg_id,e.id_warrior),onSuccess:e=>{const d=e.money;i(c.updateCoinMinus(d)),o.invalidateQueries({queryKey:["army",r]})}},o),m=l({mutationFn:e=>_(e.tg_id,e.id_warrior),onSuccess:e=>{const d=e.money;i(c.updateCoinMinus(d)),o.invalidateQueries({queryKey:["army",r]})}},o),g=e=>{p.mutate({tg_id:r,id_warrior:e})},x=e=>{m.mutate({tg_id:r,id_warrior:e})};return s.jsx("div",{className:M.upgradeBlock,children:s.jsx("ul",{children:a&&a.map(e=>s.jsxs("li",{children:[s.jsx("img",{src:e.image,alt:e.name}),s.jsxs("div",{children:[s.jsxs("p",{children:[e.name," warrior"]}),s.jsxs("div",{children:[s.jsxs("p",{children:[e.lvl_speed," speed lvl"]}),s.jsxs("p",{children:[e.speed," sec"]}),n&&s.jsxs("button",{onClick:()=>x(e.id_warrior),disabled:e.price_speed>n.money,children:[e.price_speed," coin"]})]}),s.jsxs("div",{children:[s.jsxs("p",{children:[e.lvl_damage," damage lvl"]}),s.jsxs("p",{children:[e.damage," damage"]}),n&&s.jsxs("button",{onClick:()=>g(e.id_warrior),disabled:e.price_damage>(n==null?void 0:n.money),children:[e.price_damage," coin"]})]})]})]},e.id_warrior))})})}function q(){const a=u(C),[r,i]=t.useState();return t.useEffect(()=>{Array.isArray(a)&&a&&i(a)},[a]),s.jsx(v,{children:s.jsx(S,{army:r})})}export{q as default};
