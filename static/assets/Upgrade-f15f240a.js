import{u as y,a as u,c as d,j as s,r as t}from"./index-0be30712.js";import{M as j}from"./ModalRoute-25b5fe8e.js";import{g as h,a as _}from"./getArmy-3bee7851.js";import{u as f,c as l,d as v,q as o,e as C}from"./queryClient-abed3cb8.js";const M="_upgradeBlock_1pj46_1",S={upgradeBlock:M};function k({army:a}){const{tg_id:r}=f(),i=y(),n=u(h),p=l({mutationFn:e=>v(e.tg_id,e.id_warrior),onSuccess:e=>{const c=e.money;i(d.updateCoinMinus(c)),o.invalidateQueries({queryKey:["army",r]})}},o),m=l({mutationFn:e=>C(e.tg_id,e.id_warrior),onSuccess:e=>{const c=e.money;i(d.updateCoinMinus(c)),o.invalidateQueries({queryKey:["army",r]})}},o),g=e=>{p.mutate({tg_id:r,id_warrior:e})},x=e=>{m.mutate({tg_id:r,id_warrior:e})};return s.jsx("div",{className:S.upgradeBlock,children:s.jsx("ul",{children:a&&a.map(e=>s.jsxs("li",{children:[s.jsx("img",{src:e.image,alt:e.name}),s.jsxs("div",{children:[s.jsxs("p",{children:[e.name," warrior"]}),s.jsxs("div",{children:[s.jsxs("p",{children:[e.lvl_speed," speed lvl"]}),s.jsxs("p",{children:[e.speed," sec"]}),n&&s.jsxs("button",{onClick:()=>x(e.id_warrior),disabled:e.price_speed>n.money,children:[e.price_speed," coin"]})]}),s.jsxs("div",{children:[s.jsxs("p",{children:[e.lvl_damage," damage lvl"]}),s.jsxs("p",{children:[e.damage," damage"]}),n&&s.jsxs("button",{onClick:()=>g(e.id_warrior),disabled:e.price_damage>(n==null?void 0:n.money),children:[e.price_damage," coin"]})]})]})]},e.id_warrior))})})}function B(){const a=u(_),[r,i]=t.useState();return t.useEffect(()=>{Array.isArray(a)&&a&&i(a)},[a]),s.jsx(j,{children:s.jsx(k,{army:r})})}export{B as default};
