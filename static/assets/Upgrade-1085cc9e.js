import{b as y,u as h,a as u,c as d,j as s,r as t}from"./index-237a1e59.js";import{M as j}from"./ModalRoute-422a20c9.js";import{g as _,a as v}from"./getArmy-3bee7851.js";import{b as l,c as f,q as o,d as C}from"./queryClient-71f6b9af.js";const M="_upgradeBlock_85a2v_1",S={upgradeBlock:M};function b({army:a}){const{tg_id:r}=y(),i=h(),n=u(_),p=l({mutationFn:e=>f(e.tg_id,e.id_warrior),onSuccess:e=>{const c=e.money;i(d.updateCoinMinus(c)),o.invalidateQueries({queryKey:["army",r]})}},o),m=l({mutationFn:e=>C(e.tg_id,e.id_warrior),onSuccess:e=>{const c=e.money;i(d.updateCoinMinus(c)),o.invalidateQueries({queryKey:["army",r]})}},o),g=e=>{p.mutate({tg_id:r,id_warrior:e})},x=e=>{m.mutate({tg_id:r,id_warrior:e})};return s.jsx("div",{className:S.upgradeBlock,children:s.jsx("ul",{children:a&&a.map(e=>s.jsxs("li",{children:[s.jsx("img",{src:e.image,alt:e.name}),s.jsxs("div",{children:[s.jsxs("p",{children:[e.name," warrior"]}),s.jsxs("div",{children:[s.jsxs("p",{children:[e.lvl_speed," speed lvl"]}),s.jsxs("p",{children:[e.speed," sec"]}),n&&s.jsxs("button",{onClick:()=>x(e.id_warrior),disabled:e.price_speed>n.money,children:[e.price_speed," coin"]})]}),s.jsxs("div",{children:[s.jsxs("p",{children:[e.lvl_damage," damage lvl"]}),s.jsxs("p",{children:[e.damage," damage"]}),n&&s.jsxs("button",{onClick:()=>g(e.id_warrior),disabled:e.price_damage>(n==null?void 0:n.money),children:[e.price_damage," coin"]})]})]})]},e.id_warrior))})})}function B(){const a=u(v),[r,i]=t.useState();return t.useEffect(()=>{Array.isArray(a)&&a&&i(a)},[a]),s.jsx(j,{children:s.jsx(b,{army:r})})}export{B as default};
