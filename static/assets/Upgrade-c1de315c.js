import{b as y,u as j,a as u,j as s,c as d,r as t}from"./index-4a73c7d0.js";import{M as h}from"./ModalRoute-e8fe69dd.js";import{g as _,c as f,d as v,b as C}from"./getArmy-b78a3964.js";import{u as l,q as o}from"./queryClient-4a473a86.js";const M="_upgradeBlock_1pj46_1",S={upgradeBlock:M};function b({army:a}){const{tg_id:r}=y(),i=j(),n=u(_),p=l({mutationFn:e=>f(e.tg_id,e.id_warrior),onSuccess:e=>{const c=e.money;i(d.updateCoinMinus(c)),o.invalidateQueries({queryKey:["army",r]})}},o),m=l({mutationFn:e=>v(e.tg_id,e.id_warrior),onSuccess:e=>{const c=e.money;i(d.updateCoinMinus(c)),o.invalidateQueries({queryKey:["army",r]})}},o),g=e=>{p.mutate({tg_id:r,id_warrior:e})},x=e=>{m.mutate({tg_id:r,id_warrior:e})};return s.jsx("div",{className:S.upgradeBlock,children:s.jsx("ul",{children:a&&a.map(e=>s.jsxs("li",{children:[s.jsx("img",{src:e.image,alt:e.name}),s.jsxs("div",{children:[s.jsxs("p",{children:[e.name," warrior"]}),s.jsxs("div",{children:[s.jsxs("p",{children:[e.lvl_speed," speed lvl"]}),s.jsxs("p",{children:[e.speed," sec"]}),n&&s.jsxs("button",{onClick:()=>x(e.id_warrior),disabled:e.price_speed>n.money,children:[e.price_speed," coin"]})]}),s.jsxs("div",{children:[s.jsxs("p",{children:[e.lvl_damage," damage lvl"]}),s.jsxs("p",{children:[e.damage," damage"]}),n&&s.jsxs("button",{onClick:()=>g(e.id_warrior),disabled:e.price_damage>(n==null?void 0:n.money),children:[e.price_damage," coin"]})]})]})]},e.id_warrior))})})}function B(){const a=u(C),[r,i]=t.useState();return t.useEffect(()=>{Array.isArray(a)&&a&&i(a)},[a]),s.jsx(h,{children:s.jsx(b,{army:r})})}export{B as default};
