var Z=(i,t,e)=>{if(!t.has(i))throw TypeError("Cannot "+e)};var s=(i,t,e)=>(Z(i,t,"read from private field"),e?e.call(i):t.get(i)),u=(i,t,e)=>{if(t.has(i))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(i):t.set(i,e)},c=(i,t,e,r)=>(Z(i,t,"write to private field"),r?r.call(i,e):t.set(i,e),e);var d=(i,t,e)=>(Z(i,t,"access private method"),e);import{j as St,r as S}from"./index-81ef6ee0.js";import{S as Et,f as g,s as q,g as K,n as Qt,h as ft,j as pt,k as wt,m as xt,o as It,p as bt,v as yt,w as Ft,x as Ut}from"./queryClient-9b9f51b2.js";function Dt(i,t={},e=[]){return[i,...e.filter(Boolean),...Object.entries(t).filter(([r,l])=>!!l).map(([r])=>r)].join(" ")}const Xt=({isLoading:i,isDisabled:t=i,children:e,className:r="",kind:l="primary",type:o,...n})=>St.jsx("button",{disabled:t,type:o,className:Dt("btn",{},[r]),"data-kind":l,...n,children:e});var b,a,j,p,w,U,y,L,D,T,x,I,E,B,F,M,_,tt,k,et,A,st,N,it,V,rt,W,at,z,nt,$,gt,Rt,Tt=(Rt=class extends Et{constructor(t,e){super();u(this,F);u(this,_);u(this,k);u(this,A);u(this,N);u(this,V);u(this,W);u(this,z);u(this,$);u(this,b,void 0);u(this,a,void 0);u(this,j,void 0);u(this,p,void 0);u(this,w,void 0);u(this,U,void 0);u(this,y,void 0);u(this,L,void 0);u(this,D,void 0);u(this,T,void 0);u(this,x,void 0);u(this,I,void 0);u(this,E,void 0);u(this,B,new Set);this.options=e,c(this,b,t),c(this,y,null),this.bindMethods(),this.setOptions(e)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(s(this,a).addObserver(this),vt(s(this,a),this.options)?d(this,F,M).call(this):this.updateResult(),d(this,N,it).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ht(s(this,a),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ht(s(this,a),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,d(this,V,rt).call(this),d(this,W,at).call(this),s(this,a).removeObserver(this)}setOptions(t,e){const r=this.options,l=s(this,a);if(this.options=s(this,b).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof g(this.options.enabled,s(this,a))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");d(this,z,nt).call(this),s(this,a).setOptions(this.options),r._defaulted&&!q(this.options,r)&&s(this,b).getQueryCache().notify({type:"observerOptionsUpdated",query:s(this,a),observer:this});const o=this.hasListeners();o&&mt(s(this,a),l,this.options,r)&&d(this,F,M).call(this),this.updateResult(e),o&&(s(this,a)!==l||g(this.options.enabled,s(this,a))!==g(r.enabled,s(this,a))||K(this.options.staleTime,s(this,a))!==K(r.staleTime,s(this,a)))&&d(this,_,tt).call(this);const n=d(this,k,et).call(this);o&&(s(this,a)!==l||g(this.options.enabled,s(this,a))!==g(r.enabled,s(this,a))||n!==s(this,E))&&d(this,A,st).call(this,n)}getOptimisticResult(t){const e=s(this,b).getQueryCache().build(s(this,b),t),r=this.createResult(e,t);return Pt(this,r)&&(c(this,p,r),c(this,U,this.options),c(this,w,s(this,a).state)),r}getCurrentResult(){return s(this,p)}trackResult(t,e){const r={};return Object.keys(t).forEach(l=>{Object.defineProperty(r,l,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(l),e==null||e(l),t[l])})}),r}trackProp(t){s(this,B).add(t)}getCurrentQuery(){return s(this,a)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=s(this,b).defaultQueryOptions(t),r=s(this,b).getQueryCache().build(s(this,b),e);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,e))}fetch(t){return d(this,F,M).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),s(this,p)))}createResult(t,e){var dt;const r=s(this,a),l=this.options,o=s(this,p),n=s(this,w),f=s(this,U),C=t!==r?t.state:s(this,j),{state:O}=t;let h={...O},P=!1,v;if(e._optimisticResults){const m=this.hasListeners(),Y=!m&&vt(t,e),Ot=m&&mt(t,r,e,l);(Y||Ot)&&(h={...h,...It(O.data,t.options)}),e._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:H,errorUpdatedAt:ut,status:Q}=h;if(e.select&&h.data!==void 0)if(o&&h.data===(n==null?void 0:n.data)&&e.select===s(this,L))v=s(this,D);else try{c(this,L,e.select),v=e.select(h.data),v=bt(o==null?void 0:o.data,v,e),c(this,D,v),c(this,y,null)}catch(m){c(this,y,m)}else v=h.data;if(e.placeholderData!==void 0&&v===void 0&&Q==="pending"){let m;if(o!=null&&o.isPlaceholderData&&e.placeholderData===(f==null?void 0:f.placeholderData))m=o.data;else if(m=typeof e.placeholderData=="function"?e.placeholderData((dt=s(this,T))==null?void 0:dt.state.data,s(this,T)):e.placeholderData,e.select&&m!==void 0)try{m=e.select(m),c(this,y,null)}catch(Y){c(this,y,Y)}m!==void 0&&(Q="success",v=bt(o==null?void 0:o.data,m,e),P=!0)}s(this,y)&&(H=s(this,y),v=s(this,D),ut=Date.now(),Q="error");const G=h.fetchStatus==="fetching",J=Q==="pending",X=Q==="error",ct=J&&G,lt=v!==void 0;return{status:Q,fetchStatus:h.fetchStatus,isPending:J,isSuccess:Q==="success",isError:X,isInitialLoading:ct,isLoading:ct,data:v,dataUpdatedAt:h.dataUpdatedAt,error:H,errorUpdatedAt:ut,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>C.dataUpdateCount||h.errorUpdateCount>C.errorUpdateCount,isFetching:G,isRefetching:G&&!J,isLoadingError:X&&!lt,isPaused:h.fetchStatus==="paused",isPlaceholderData:P,isRefetchError:X&&lt,isStale:ot(t,e),refetch:this.refetch}}updateResult(t){const e=s(this,p),r=this.createResult(s(this,a),this.options);if(c(this,w,s(this,a).state),c(this,U,this.options),s(this,w).data!==void 0&&c(this,T,s(this,a)),q(r,e))return;c(this,p,r);const l={},o=()=>{if(!e)return!0;const{notifyOnChangeProps:n}=this.options,f=typeof n=="function"?n():n;if(f==="all"||!f&&!s(this,B).size)return!0;const R=new Set(f??s(this,B));return this.options.throwOnError&&R.add("error"),Object.keys(s(this,p)).some(C=>{const O=C;return s(this,p)[O]!==e[O]&&R.has(O)})};(t==null?void 0:t.listeners)!==!1&&o()&&(l.listeners=!0),d(this,$,gt).call(this,{...l,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&d(this,N,it).call(this)}},b=new WeakMap,a=new WeakMap,j=new WeakMap,p=new WeakMap,w=new WeakMap,U=new WeakMap,y=new WeakMap,L=new WeakMap,D=new WeakMap,T=new WeakMap,x=new WeakMap,I=new WeakMap,E=new WeakMap,B=new WeakMap,F=new WeakSet,M=function(t){d(this,z,nt).call(this);let e=s(this,a).fetch(this.options,t);return t!=null&&t.throwOnError||(e=e.catch(Qt)),e},_=new WeakSet,tt=function(){d(this,V,rt).call(this);const t=K(this.options.staleTime,s(this,a));if(ft||s(this,p).isStale||!pt(t))return;const r=wt(s(this,p).dataUpdatedAt,t)+1;c(this,x,setTimeout(()=>{s(this,p).isStale||this.updateResult()},r))},k=new WeakSet,et=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(s(this,a)):this.options.refetchInterval)??!1},A=new WeakSet,st=function(t){d(this,W,at).call(this),c(this,E,t),!(ft||g(this.options.enabled,s(this,a))===!1||!pt(s(this,E))||s(this,E)===0)&&c(this,I,setInterval(()=>{(this.options.refetchIntervalInBackground||xt.isFocused())&&d(this,F,M).call(this)},s(this,E)))},N=new WeakSet,it=function(){d(this,_,tt).call(this),d(this,A,st).call(this,d(this,k,et).call(this))},V=new WeakSet,rt=function(){s(this,x)&&(clearTimeout(s(this,x)),c(this,x,void 0))},W=new WeakSet,at=function(){s(this,I)&&(clearInterval(s(this,I)),c(this,I,void 0))},z=new WeakSet,nt=function(){const t=s(this,b).getQueryCache().build(s(this,b),this.options);if(t===s(this,a))return;const e=s(this,a);c(this,a,t),c(this,j,t.state),this.hasListeners()&&(e==null||e.removeObserver(this),t.addObserver(this))},$=new WeakSet,gt=function(t){yt.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(s(this,p))}),s(this,b).getQueryCache().notify({query:s(this,a),type:"observerResultsUpdated"})})},Rt);function Bt(i,t){return g(t.enabled,i)!==!1&&i.state.data===void 0&&!(i.state.status==="error"&&t.retryOnMount===!1)}function vt(i,t){return Bt(i,t)||i.state.data!==void 0&&ht(i,t,t.refetchOnMount)}function ht(i,t,e){if(g(t.enabled,i)!==!1){const r=typeof e=="function"?e(i):e;return r==="always"||r!==!1&&ot(i,t)}return!1}function mt(i,t,e,r){return(i!==t||g(r.enabled,i)===!1)&&(!e.suspense||i.state.status!=="error")&&ot(i,e)}function ot(i,t){return g(t.enabled,i)!==!1&&i.isStaleByTime(K(t.staleTime,i))}function Pt(i,t){return!q(i.getCurrentResult(),t)}var Ct=S.createContext(!1),Mt=()=>S.useContext(Ct);Ct.Provider;function jt(){let i=!1;return{clearReset:()=>{i=!1},reset:()=>{i=!0},isReset:()=>i}}var Lt=S.createContext(jt()),_t=()=>S.useContext(Lt),kt=(i,t)=>{(i.suspense||i.throwOnError)&&(t.isReset()||(i.retryOnMount=!1))},At=i=>{S.useEffect(()=>{i.clearReset()},[i])},Nt=({result:i,errorResetBoundary:t,throwOnError:e,query:r})=>i.isError&&!t.isReset()&&!i.isFetching&&r&&Ft(e,[i.error,r]),Vt=i=>{i.suspense&&typeof i.staleTime!="number"&&(i.staleTime=1e3)},Wt=(i,t)=>(i==null?void 0:i.suspense)&&t.isPending,zt=(i,t,e)=>t.fetchOptimistic(i).catch(()=>{e.clearReset()});function Ht(i,t,e){var C,O,h,P;const r=Ut(e),l=Mt(),o=_t(),n=r.defaultQueryOptions(i);(O=(C=r.getDefaultOptions().queries)==null?void 0:C._experimental_beforeQuery)==null||O.call(C,n),n._optimisticResults=l?"isRestoring":"optimistic",Vt(n),kt(n,o),At(o);const[f]=S.useState(()=>new t(r,n)),R=f.getOptimisticResult(n);if(S.useSyncExternalStore(S.useCallback(v=>{const H=l?()=>{}:f.subscribe(yt.batchCalls(v));return f.updateResult(),H},[f,l]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),S.useEffect(()=>{f.setOptions(n,{listeners:!1})},[n,f]),Wt(n,R))throw zt(n,f,o);if(Nt({result:R,errorResetBoundary:o,throwOnError:n.throwOnError,query:r.getQueryCache().get(n.queryHash)}))throw R.error;return(P=(h=r.getDefaultOptions().queries)==null?void 0:h._experimental_afterQuery)==null||P.call(h,n,R),n.notifyOnChangeProps?R:f.trackResult(R)}function Yt(i,t){return Ht(i,Tt,t)}export{Xt as B,Dt as c,Yt as u};
