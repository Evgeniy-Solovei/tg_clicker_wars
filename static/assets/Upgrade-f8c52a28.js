import{b as y,u as h,a as u,j as s,c as d,r as t,M as j}from"./index-5638df4d.js";import{h as _,m as l,p as v,q as o,v as f,l as C}from"./getArmy-f1027459.js";const M="_upgradeBlock_85a2v_1",S={upgradeBlock:M};function k({army:a}){const{tg_id:r}=y(),i=h(),n=u(_),p=l({mutationFn:e=>v(e.tg_id,e.id_warrior),onSuccess:e=>{const c=e.money;i(d.updateCoinMinus(c)),o.invalidateQueries({queryKey:["army",r]})}},o),m=l({mutationFn:e=>f(e.tg_id,e.id_warrior),onSuccess:e=>{const c=e.money;i(d.updateCoinMinus(c)),o.invalidateQueries({queryKey:["army",r]})}},o),g=e=>{p.mutate({tg_id:r,id_warrior:e})},x=e=>{m.mutate({tg_id:r,id_warrior:e})};return s.jsx("div",{className:S.upgradeBlock,children:s.jsx("ul",{children:a&&a.map(e=>s.jsxs("li",{children:[s.jsx("img",{src:e.image,alt:e.name}),s.jsxs("div",{children:[s.jsxs("p",{children:[e.name," warrior"]}),s.jsxs("div",{children:[s.jsxs("p",{children:[e.lvl_speed," speed lvl"]}),s.jsxs("p",{children:[e.speed," sec"]}),n&&s.jsxs("button",{onClick:()=>x(e.id_warrior),disabled:e.price_speed>n.money,children:[e.price_speed," coin"]})]}),s.jsxs("div",{children:[s.jsxs("p",{children:[e.lvl_damage," damage lvl"]}),s.jsxs("p",{children:[e.damage," damage"]}),n&&s.jsxs("button",{onClick:()=>g(e.id_warrior),disabled:e.price_damage>(n==null?void 0:n.money),children:[e.price_damage," coin"]})]})]})]},e.id_warrior))})})}function b(){const a=u(C),[r,i]=t.useState();return t.useEffect(()=>{Array.isArray(a)&&a&&i(a)},[a]),s.jsx(j,{children:s.jsx(k,{army:r})})}export{b as default};
